---
title: View logs to collect and review data on Azure Kubernetes Services on Azure Stack HCI
description: Learn how to view logs to collect and review data on Azure Kubernetes Services on Azure Stack HCI.
author: EkeleAsonye
ms.topic: how-to
ms.date: 05/14/2021
ms.author: v-susbo
---

# View logs to collect and review data in AKS on Azure Stack HCI

Logs present an important means to collect and review data from multiple sources and provide insights into the general condition of your environment. They are helpful when troubleshooting user application and services, as the user may need to view the logs generated by different AKS on Azure Stack HCI components determine possible points of failure when an issue arises. This topic presents different useful log data that enables debugging of issues and also details some AKS on Azure Stack HCI and `kubectl` commands to view these logs.

## Use PowerShell commands to view logs

The following list details the available PowerShell commands for viewing logs to collect data:

- **Get-AksHciLogs**: This command gathers and presents the full diagnostic logs from all your pods and creates an output zipped folder called `akshcilogs.zip` in your AKS on Azure Stack HCI working directory. The default location of  your zip folder is C:\AksHci\0.9.6.3\akshcilogs.zip, where `0.9.8.10427` is the AKS on Azure Stack HCI release number.
- **Get-AksHciLogs -AgentLogs**: This flag is added to get the logs from the MOC stack cloud agent and node agent services. The output of the command is located at C:\AksHci\0.9.8.10427\akshcilogs.
- **Get-AksHciLog -EventLogs**: This command gets event logs that are logged to event viewer.
- **Get-AksHciLogs -VirtualMachineLogs**: This is used to get the logs from the guest virtual machines created by AKSHCI.
- **Get-AksHciLogs -KvaLogs**: This flag is added to get the logs from the AKSHCI host. 
- **Get-AksHciLogs -DownloadSdkLogs**: This command retrieves the download logs that are generated from downloading the binaries and images that AKS on Azure Stack HCI uses.   
- **Get-AksHciLogs -BillingRecords**: This flag is added to get the billing records. The output is generally a text document located at C:\AksHci\0.9.8.10427\akshcilogs.

## Microsoft On-premises Cloud 
Microsoft On-premises Cloud is the management stack that enables virtual machines on Azure Stack HCI or on a Windows Server-based Software-defined datacenter (SDDC) to be managed in the cloud. Microsoft On-premises Cloud includes the following components:

- A single instance of a highly available cloud agent service deployed in the cluster. This agent runs on any one node in the Azure Stack HCI cluster and is configured to fail over to another node.
- A node agent running on every Azure Stack HCI physical node.

To enable communication with Microsoft On-premises Cloud, you need to provide the IP Address CIDR to be used for the service. The `-cloudserviceCIDR` parameter in the [Set-AksHciConfig](./set-akshciconfig.md) command is used to assign the IP address to the cloud agent service and enable high availability for the service.

`Get-MocConfig` is a useful debugging tool that can provide information such as the cloud 	configuration, node configuration, certification location of the node and the Microsoft On-premises Cloud.

## Kubernetes Virtual Appliance 
Kubernetes Virtual Appliance (KVA) is a virtual machine image file that consists of a pre-configured operating system environment and a single application. The purpose of the KVA is to simplify delivery and operation of an application. Consequently, only necessary operating system components are included. The **Get-kvaConfig** command provides some important details that could help in debugging issues with misconfiguration.

## Kubectl commands 
Kubernetes logs also have useful information about the health of your cluster and applications. Some important ones include the following commands:
- **Kubectl get nodes** lists all nodes and provides information about their status, roles, age after creation, and version.
- **Kubectl get pods** lists all pods in the namespace and their status.
- **Kubectl get service** lists all services in the namespace.
- **Kubectl get events** gives a sequence of timing for activities associated with different kubernetes objects.
- 
- ## Next steps
In this topic, you learned how to view the logs from multiple sources and provide insights into the general condition of your AKS on Azure Stack HCI environment. To monitor and troubleshoot further, you can also view the Kubelet logs.